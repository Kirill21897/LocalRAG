# LocalRAG

**LocalRAG** ‚Äî —ç—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ª–æ–∫–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ Retrieval-Augmented Generation (RAG), –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –Ω–∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö. –ü—Ä–æ–µ–∫—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã, –≤–µ–∫—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å –∏—Ö, –≤—ã–ø–æ–ª–Ω—è—Ç—å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –∏ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ª–æ–∫–∞–ª—å–Ω—ã—Ö LLM (—á–µ—Ä–µ–∑ Ollama). –¢–∞–∫–∂–µ –≤–∫–ª—é—á–µ–Ω –º–æ—â–Ω—ã–π –º–æ–¥—É–ª—å –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (Evaluation) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ **Ragas**.

## üöÄ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

*   **–õ–æ–∫–∞–ª—å–Ω–æ—Å—Ç—å**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Ollama –¥–ª—è –∑–∞–ø—É—Å–∫–∞ LLM (Llama 3, Mistral –∏ –¥—Ä.) –ª–æ–∫–∞–ª—å–Ω–æ –±–µ–∑ –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –æ–±–ª–∞–∫–æ.
*   **Ingestion**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (PDF, MD –∏ –¥—Ä.) —Å –ø–æ–º–æ—â—å—é **Docling**.
*   **–í–µ–∫—Ç–æ—Ä–Ω–∞—è –ë–î**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å **Qdrant** –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –ø–æ–∏—Å–∫–∞ –≤–µ–∫—Ç–æ—Ä–æ–≤.
*   **Embeddings**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π HuggingFace (—á–µ—Ä–µ–∑ `sentence-transformers`) –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤.
*   **Reranking**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏.
*   **Evaluation**: –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ (Faithfulness, Answer Relevancy, Context Precision/Recall) —Å –ø–æ–º–æ—â—å—é **Ragas**, –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏.

## üõ†Ô∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

*   Python 3.10+
*   [Ollama](https://ollama.com/), —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∏ –∑–∞–ø—É—â–µ–Ω–Ω—ã–π –ª–æ–∫–∞–ª—å–Ω–æ.
*   –†–µ—Å—É—Ä—Å—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ª–æ–∫–∞–ª—å–Ω—ã—Ö LLM (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è GPU, –Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –Ω–∞ CPU).

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1.  **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
    ```bash
    git clone https://github.com/your-username/LocalRAG.git
    cd LocalRAG
    ```

2.  **–°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:**
    ```bash
    python -m venv .venv
    # Windows
    .venv\Scripts\activate
    # Linux/MacOS
    source .venv/bin/activate
    ```

3.  **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
    ```bash
    pip install -r requirements.txt
    ```

4.  **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Ollama:**
    –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä Ollama –∑–∞–ø—É—â–µ–Ω:
    ```bash
    ollama serve
    ```
    –ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –º–æ–¥–µ–ª–∏ (—É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ `config/config.py`):
    ```bash
    ollama pull mistral  # –∏–ª–∏ –¥—Ä—É–≥–∞—è –º–æ–¥–µ–ª—å, –∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –≤ –ø—Ä–æ–µ–∫—Ç–µ
    ```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `config/config.py`. –í—ã –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å:
*   `OLLAMA_BASE_URL` ‚Äî –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ Ollama.
*   `EMBEDDING_MODEL` ‚Äî –º–æ–¥–µ–ª—å –¥–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤.
*   `LLM_MODEL` ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –º–æ–¥–µ–ª—å.
*   `JUDGE_MODEL` ‚Äî –º–æ–¥–µ–ª—å-—Å—É–¥—å—è –¥–ª—è –æ—Ü–µ–Ω–∫–∏ Ragas.

## üèÉ‚Äç‚ôÇÔ∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–û—Å–Ω–æ–≤–Ω–æ–π —Ç–æ—á–∫–æ–π –≤—Ö–æ–¥–∞ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∏ —Ä–∞–±–æ—Ç—ã —è–≤–ª—è–µ—Ç—Å—è Jupyter Notebook:

1.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ Jupyter Lab –∏–ª–∏ Notebook:
    ```bash
    jupyter notebook
    ```
2.  –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `test_notebook.ipynb`.
3.  –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ —è—á–µ–π–∫–∞—Ö –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö, —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞ –∏ –∑–∞–ø—É—Å–∫–∞ RAG-–ø–∞–π–ø–ª–∞–π–Ω–∞.

### –ó–∞–ø—É—Å–∫ –æ—Ü–µ–Ω–∫–∏ (Evaluation)

–ö–æ–¥ –æ—Ü–µ–Ω–∫–∏ –≤—ã–Ω–µ—Å–µ–Ω –≤ –º–æ–¥—É–ª—å `src.evaluation`. –í –Ω–æ—É—Ç–±—É–∫–µ –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ü–µ–Ω–∫—É –∫–∞—á–µ—Å—Ç–≤–∞ –≤–∞—à–µ–≥–æ RAG-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```python
from src.evaluation.ragas_eval import RagasEvaluator

evaluator = RagasEvaluator()
# ... –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö ...
df_results = evaluator.run_evaluation(questions, answers, contexts, ground_truths)
```

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `data/evaluation_results/`.

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
LocalRAG/
‚îú‚îÄ‚îÄ config/             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ data/               # –î–∞–Ω–Ω—ã–µ (raw, processed, results)
‚îú‚îÄ‚îÄ scripts/            # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
‚îú‚îÄ‚îÄ src/                # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ evaluation/     # –ú–æ–¥—É–ª—å –æ—Ü–µ–Ω–∫–∏ (Ragas)
‚îÇ   ‚îú‚îÄ‚îÄ document_loader.py
‚îÇ   ‚îú‚îÄ‚îÄ embedder.py
‚îÇ   ‚îú‚îÄ‚îÄ generator.py
‚îÇ   ‚îú‚îÄ‚îÄ retrieval.py
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ requirements.txt    # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îî‚îÄ‚îÄ test_notebook.ipynb # –û—Å–Ω–æ–≤–Ω–æ–π –Ω–æ—É—Ç–±—É–∫ —Å –ø–∞–π–ø–ª–∞–π–Ω–æ–º
```

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
